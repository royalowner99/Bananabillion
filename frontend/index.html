<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>BananaBillion - Tap to Earn</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    * {
      -webkit-tap-highlight-color: transparent;
      user-select: none;
    }
    
    body {
      overflow: hidden;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    
    .banana-btn {
      transition: transform 0.1s;
      cursor: pointer;
    }
    
    .banana-btn:active {
      transform: scale(0.95);
    }
    
    .coin-float {
      position: absolute;
      animation: floatUp 1s ease-out forwards;
      pointer-events: none;
      font-weight: bold;
      font-size: 24px;
      color: #FFD700;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    }
    
    @keyframes floatUp {
      0% {
        opacity: 1;
        transform: translateY(0);
      }
      100% {
        opacity: 0;
        transform: translateY(-100px);
      }
    }
    
    .energy-bar {
      transition: width 0.3s ease;
    }
    
    .tab-active {
      background: rgba(255, 255, 255, 0.2);
      border-bottom: 3px solid #FFD700;
    }
    
    .upgrade-card {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }
    
    .modal.active {
      display: flex;
    }
  </style>
</head>
<body class="text-white">
  <div id="app" class="h-screen flex flex-col">
    <!-- Header -->
    <div class="bg-black bg-opacity-30 p-4">
      <div class="flex justify-between items-center">
        <div>
          <div class="text-sm opacity-75">Balance</div>
          <div class="text-2xl font-bold" id="balance">0</div>
        </div>
        <div class="text-right">
          <div class="text-sm opacity-75">Energy</div>
          <div class="text-xl font-bold" id="energy">0/0</div>
        </div>
      </div>
      <div class="mt-2 bg-gray-700 rounded-full h-3 overflow-hidden">
        <div id="energyBar" class="energy-bar bg-yellow-400 h-full" style="width: 100%"></div>
      </div>
    </div>

    <!-- Main Content -->
    <div id="mainContent" class="flex-1 overflow-y-auto">
      <!-- Game Tab -->
      <div id="gameTab" class="tab-content p-4">
        <div class="text-center mb-4">
          <div class="text-sm opacity-75">Tap Power</div>
          <div class="text-xl font-bold" id="tapPower">1</div>
        </div>
        
        <div class="flex justify-center items-center" style="height: 400px; position: relative;">
          <button id="bananaBtn" class="banana-btn">
            <div class="text-9xl">ğŸŒ</div>
          </button>
        </div>
        
        <div class="grid grid-cols-3 gap-4 mt-4 text-center text-sm">
          <div>
            <div class="opacity-75">Total Taps</div>
            <div class="font-bold" id="totalTaps">0</div>
          </div>
          <div>
            <div class="opacity-75">Combo</div>
            <div class="font-bold" id="combo">0x</div>
          </div>
          <div>
            <div class="opacity-75">Crits</div>
            <div class="font-bold" id="crits">0</div>
          </div>
        </div>
      </div>

      <!-- Upgrades Tab -->
      <div id="upgradesTab" class="tab-content hidden p-4">
        <h2 class="text-2xl font-bold mb-4">âš¡ Upgrades</h2>
        <div id="upgradesList" class="space-y-3"></div>
      </div>

      <!-- Tasks Tab -->
      <div id="tasksTab" class="tab-content hidden p-4">
        <h2 class="text-2xl font-bold mb-4">ğŸ¯ Tasks</h2>
        <div id="tasksList" class="space-y-3"></div>
      </div>

      <!-- Leaderboard Tab -->
      <div id="leaderboardTab" class="tab-content hidden p-4">
        <h2 class="text-2xl font-bold mb-4">ğŸ† Leaderboard</h2>
        <div class="flex gap-2 mb-4">
          <button onclick="loadLeaderboard('daily')" class="flex-1 py-2 px-4 rounded bg-white bg-opacity-20">Daily</button>
          <button onclick="loadLeaderboard('weekly')" class="flex-1 py-2 px-4 rounded bg-white bg-opacity-20">Weekly</button>
          <button onclick="loadLeaderboard('global')" class="flex-1 py-2 px-4 rounded bg-white bg-opacity-20">Global</button>
        </div>
        <div id="leaderboardList" class="space-y-2"></div>
      </div>

      <!-- Friends Tab -->
      <div id="friendsTab" class="tab-content hidden p-4">
        <h2 class="text-2xl font-bold mb-4">ğŸ‘¥ Invite Friends</h2>
        <div class="upgrade-card rounded-lg p-4 mb-4">
          <div class="text-center">
            <div class="text-4xl mb-2">ğŸ</div>
            <div class="text-lg font-bold">Earn 20% of friend's earnings!</div>
            <div class="text-sm opacity-75 mt-2">Your referrals: <span id="referralCount">0</span></div>
            <div class="text-sm opacity-75">Referral earnings: <span id="referralEarnings">0</span></div>
          </div>
        </div>
        <button onclick="shareReferral()" class="w-full py-3 px-4 rounded-lg bg-yellow-500 text-black font-bold">
          ğŸ“¤ Share Referral Link
        </button>
        <div id="referralsList" class="mt-4 space-y-2"></div>
      </div>
    </div>

    <!-- Bottom Navigation -->
    <div class="bg-black bg-opacity-30 flex">
      <button onclick="switchTab('game')" class="tab-btn tab-active flex-1 py-4 text-center">
        <div class="text-2xl">ğŸ®</div>
        <div class="text-xs mt-1">Game</div>
      </button>
      <button onclick="switchTab('upgrades')" class="tab-btn flex-1 py-4 text-center">
        <div class="text-2xl">âš¡</div>
        <div class="text-xs mt-1">Upgrades</div>
      </button>
      <button onclick="switchTab('tasks')" class="tab-btn flex-1 py-4 text-center">
        <div class="text-2xl">ğŸ¯</div>
        <div class="text-xs mt-1">Tasks</div>
      </button>
      <button onclick="switchTab('leaderboard')" class="tab-btn flex-1 py-4 text-center">
        <div class="text-2xl">ğŸ†</div>
        <div class="text-xs mt-1">Top</div>
      </button>
      <button onclick="switchTab('friends')" class="tab-btn flex-1 py-4 text-center">
        <div class="text-2xl">ğŸ‘¥</div>
        <div class="text-xs mt-1">Friends</div>
      </button>
    </div>
  </div>

  <!-- Daily Reward Modal -->
  <div id="dailyModal" class="modal">
    <div class="bg-white text-black rounded-lg p-6 max-w-sm mx-4">
      <h3 class="text-2xl font-bold mb-4 text-center">ğŸ Daily Reward</h3>
      <div class="text-center mb-4">
        <div class="text-6xl mb-2">ğŸŒ</div>
        <div class="text-3xl font-bold text-yellow-600" id="dailyReward">0</div>
        <div class="text-sm opacity-75 mt-2">Day <span id="dailyStreak">1</span> of 7</div>
      </div>
      <button onclick="closeDailyModal()" class="w-full py-3 px-4 rounded-lg bg-yellow-500 font-bold">
        Claim Reward
      </button>
    </div>
  </div>

  <script src="src/main.js"></script>
</body>
</html>
